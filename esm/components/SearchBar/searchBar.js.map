{"version":3,"sources":["../../../src/components/SearchBar/searchBar.js"],"names":["React","useCallback","bool","func","shape","string","Form","useDropdown","mergeClasses","Autocomplete","SearchField","defaultClasses","initialValues","search_query","SearchBar","props","history","isOpen","location","elementRef","expanded","setExpanded","classes","rootClassName","root_open","root","handleChange","value","handleFocus","handleSubmit","push","container","form","search","autocomplete","propTypes","isRequired"],"mappings":"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","sourcesContent":["import React, { useCallback } from 'react';\nimport { bool, func, shape, string } from 'prop-types';\nimport { Form } from 'informed';\nimport { useDropdown } from '@magento/peregrine';\n\nimport { mergeClasses } from 'src/classify';\nimport Autocomplete from './autocomplete';\nimport SearchField from './searchField';\nimport defaultClasses from './searchBar.css';\n\nconst initialValues = { search_query: '' };\n\nconst SearchBar = props => {\n    const { history, isOpen, location } = props;\n    const { elementRef, expanded, setExpanded } = useDropdown();\n\n    const classes = mergeClasses(defaultClasses, props.classes);\n    const rootClassName = isOpen ? classes.root_open : classes.root;\n\n    // expand or collapse on input change\n    const handleChange = useCallback(value => {\n        setExpanded(!!value);\n    }, []);\n\n    // expand on focus\n    const handleFocus = useCallback(() => {\n        setExpanded(true);\n    }, []);\n\n    // navigate on submit\n    const handleSubmit = useCallback(\n        ({ search_query }) => {\n            history.push(`/search.html?query=${search_query}`);\n        },\n        [history]\n    );\n\n    return (\n        <div className={rootClassName}>\n            <div ref={elementRef} className={classes.container}>\n                <Form\n                    autoComplete=\"off\"\n                    className={classes.form}\n                    initialValues={initialValues}\n                    onSubmit={handleSubmit}\n                >\n                    <div className={classes.search}>\n                        <SearchField\n                            location={location}\n                            onChange={handleChange}\n                            onFocus={handleFocus}\n                        />\n                    </div>\n                    <div className={classes.autocomplete}>\n                        <Autocomplete\n                            setVisible={setExpanded}\n                            visible={expanded}\n                        />\n                    </div>\n                </Form>\n            </div>\n        </div>\n    );\n};\n\nexport default SearchBar;\n\nSearchBar.propTypes = {\n    classes: shape({\n        autocomplete: string,\n        container: string,\n        form: string,\n        root: string,\n        root_open: string,\n        search: string\n    }),\n    history: shape({\n        push: func.isRequired\n    }).isRequired,\n    isOpen: bool,\n    location: shape({}).isRequired\n};\n"],"file":"searchBar.js"}