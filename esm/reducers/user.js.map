{"version":3,"sources":["../../src/reducers/user.js"],"names":["handleActions","Util","BrowserPersistence","storage","actions","name","isSignedIn","getItem","initialState","currentUser","email","firstname","lastname","getDetailsError","isGettingDetails","isSigningIn","forgotPassword","isInProgress","signInError","reducerMap","signIn","request","state","receive","payload","error","getDetails","createAccountError","resetCreateAccountError","resetPassword","completePasswordReset","reset"],"mappings":"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","sourcesContent":["import { handleActions } from 'redux-actions';\n\nimport { Util } from '@magento/peregrine';\nconst { BrowserPersistence } = Util;\n\nconst storage = new BrowserPersistence();\n\nimport actions from 'src/actions/user';\n\nexport const name = 'user';\n\nconst isSignedIn = () => !!storage.getItem('signin_token');\n\nconst initialState = {\n    currentUser: {\n        email: '',\n        firstname: '',\n        lastname: ''\n    },\n    getDetailsError: {},\n    isGettingDetails: false,\n    isSignedIn: isSignedIn(),\n    isSigningIn: false,\n    forgotPassword: {\n        email: '',\n        isInProgress: false\n    },\n    signInError: {}\n};\n\nconst reducerMap = {\n    [actions.signIn.request]: state => {\n        return {\n            ...state,\n            isSigningIn: true,\n            signInError: {}\n        };\n    },\n    [actions.signIn.receive]: (state, { payload, error }) => {\n        if (error) {\n            return {\n                ...initialState,\n                signInError: payload\n            };\n        }\n\n        return {\n            ...state,\n            isSignedIn: true,\n            isSigningIn: false\n        };\n    },\n    [actions.getDetails.request]: state => {\n        return {\n            ...state,\n            getDetailsError: {},\n            isGettingDetails: true\n        };\n    },\n    [actions.getDetails.receive]: (state, { payload, error }) => {\n        if (error) {\n            return {\n                ...state,\n                getDetailsError: payload,\n                isGettingDetails: false\n            };\n        }\n\n        return {\n            ...state,\n            currentUser: payload,\n            isGettingDetails: false\n        };\n    },\n    [actions.createAccountError.receive]: (state, { payload }) => {\n        return {\n            ...state,\n            createAccountError: payload\n        };\n    },\n    [actions.resetCreateAccountError.receive]: state => {\n        return {\n            ...state,\n            createAccountError: {}\n        };\n    },\n    [actions.resetPassword.request]: (state, { payload }) => {\n        return {\n            ...state,\n            forgotPassword: {\n                email: payload,\n                isInProgress: true\n            }\n        };\n    },\n    // TODO: handle the reset password response from the API.\n    [actions.resetPassword.receive]: state => state,\n    [actions.completePasswordReset]: (state, { payload }) => {\n        const { email } = payload;\n\n        return {\n            ...state,\n            forgotPassword: {\n                email,\n                isInProgress: false\n            }\n        };\n    },\n    [actions.signIn.reset]: () => {\n        return {\n            ...initialState,\n            isSignedIn: isSignedIn()\n        };\n    }\n};\n\nexport default handleActions(reducerMap, initialState);\n"],"file":"user.js"}